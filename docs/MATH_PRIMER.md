# Мини-ликбез по математике (без страха)

Цель: объяснить только ту математику, которая нужна для понимания кода.

---

## Комплексные числа без боли

- Записываем число как `x = I + jQ`. Геометрически — точка на плоскости (I по X, Q по Y).
- Амплитуда: `|x| = sqrt(I^2 + Q^2)`. Фаза: `φ = atan2(Q, I)`.
- Умножение на `e^{jθ}` — поворот точки на угол `θ`.

Практика: в `visualization.plot_constellation` вы это увидите глазами.

---

## SNR и децибелы (dB)

- Мощность сигнала `P = E[|x|^2]`.
- Линейный SNR: `SNR_lin = P_sig / P_noise`. В дБ: `SNR_dB = 10 * log10(SNR_lin)`.
- Нормировка: если `P_sig = 1`, то `P_noise = 1 / SNR_lin`.

В коде: `config_and_utils.db2lin`, `lin2db`, `add_awgn`.

---

## Мгновенная частота (интуитивно)

- Фаза — это «угол» в созвездии. Если угол растет — меняется частота.
- Мгновенная частота: `f_inst[n] = (unwrap(φ[n]) - unwrap(φ[n-1])) * Fs / (2π)`.
- Для FM/FSK распределение `f_inst` ярко отличается от PSK/QAM — хороший признак.

В коде: `features.instantaneous_features`.

---

## Спектр и спектрограмма

- Спектр (|FFT|): показывает, какие частоты «живут» в сигнале.
- Спектрограмма (STFT): спектр во времени. Окно `N` → лучше частотное, хуже временное разрешение; маленькое окно — наоборот.

В коде: `visualization.plot_spectrogram`, `dl_prep.tf_spectrogram_stft`.

---

## Кумулянты (зачем они)

- Высшие статистики комплексной величины, чувствительные к форме созвездия.
- Нормированные `c20, c40, c42` различают PSK/QAM, слабо зависят от масштаба.

В коде: `features.cumulants_complex`.

---

## Почему CNN «видит» модуляции

- Свёртки ловят локальные паттерны: переходы символов, следы фильтрации, периодики.
- Пулинг дает инвариантность к мелким сдвигам/шуму.
- Для спектрограмм CNN распознает характерные «текстуры» (WBFM/FSK/AM).

В коде: `models_dl.build_cnn1d`, `build_cnn2d_spectrogram`.